(function(t){function e(e){for(var n,o,r=e[0],l=e[1],u=e[2],p=0,h=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/evil_goblin/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var c=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"071e":function(t,e,i){"use strict";var n=i("f3f8"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("GameGround")],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game"},[i("transition",[t.levelFirstFinish?t.finishDemo?i("div",[i("AppPopUp",{attrs:{text:"Демо версия подошла к концу,\n      спасибо за уделенное время.Злой гоблин пошел готовится к\n      новым заданиям и Вам советую...Гоблин так просто не отступит","img-url":"/evil_goblin//img/frames/frame-success.png"}}),i("AppButtonGroup",[i("AppButton",{staticClass:"button-group__button_green",on:{click:t.startNewGame}},[t._v("Начать с начала\n        ")])],1)],1):i("LevelFinish",{on:{startGame:t.endGame}}):i("LevelOne",{attrs:{"level-finish":t.levelFirstFinish},on:{levelFinish:function(e){t.levelFirstFinish=!0}}})],1)],1)},r=[],l=i("75fc"),u=i("b679"),c=(i("ac6a"),i("d225")),p=i("b0b4"),h=function(){function t(){Object(c["a"])(this,t),this.resourceCache={},this.loading=[],this.readyCallbacks=[]}return Object(p["a"])(t,[{key:"load",value:function(t){var e=this;t instanceof Array?t.forEach((function(t){e.saveToCache(t)})):this.saveToCache(t)}},{key:"saveToCache",value:function(t){var e=this;if(this.resourceCache[t])return this.resourceCache[t];var i=new Image;i.onload=function(){e.resourceCache[t]=i,e.initFunction()},this.resourceCache[t]=!1,i.src=t}},{key:"initFunction",value:function(){var t=this;this.isReady()&&this.readyCallbacks.forEach((function(e,i){e(),t.readyCallbacks.splice(i)}))}},{key:"get",value:function(t){return this.resourceCache[t]}},{key:"isReady",value:function(){var t=!0;for(var e in this.resourceCache)this.resourceCache.hasOwnProperty(e)&&!this.resourceCache[e]&&(t=!1);return t}},{key:"onReady",value:function(t){var e=this;setTimeout((function(){e.readyCallbacks.push(t),e.initFunction()}),10)}}]),t}(),m=new h,g=m,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("canvas",{ref:"game",staticClass:"game_scene_1"},[t._v("\n    Обновите браузер, к сожалению Ваша версия браузера не поддреживается 😿\n  ")]),i("AppTimer",{attrs:{"time-end":t.timeEnd}}),i("AppScope"),i("AppButtonGroup",[i("AppButton",{staticClass:"button-group__button_green",attrs:{disabled:t.votingByThisRound},on:{click:function(e){return t.checkStillLife(!0)}}},[t._v("Натюрморт")]),i("AppButton",{staticClass:"button-group__button_red",attrs:{disabled:t.votingByThisRound},on:{click:function(e){return t.checkStillLife(!1)}}},[t._v("Не натюрморт")])],1)],1)},d=[],v=function t(e){var i=e.isStillLife,n=e.img;Object(c["a"])(this,t),this.isStillLife=i,this.img=n},b=function(){function t(e){var i=e.url,n=e.pos,s=e.size,a=e.speed,o=e.frames,r=e.dir,l=e.once,u=e.positionInCanvas;e.sizeImg;Object(c["a"])(this,t),this.url=i;var p=g.get(this.url);this.sizeImg=[p.width,p.height],this.posInCanvas=u,this.pos=n,this.size=s,this.speed="number"===typeof a?a:0,this.frames=o,this._index=0,this.dir=r||"vertical",this.once=l}return Object(p["a"])(t,[{key:"update",value:function(t,e){this._index+=this.speed*t,this.posInCanvas[1]+=e*t}},{key:"render",value:function(t){var e;if(this.speed>0){var i=this.frames.length,n=Math.floor(this._index);if(e=this.frames[n%i],this.once&&n>=i)return void(this.done=!0)}else e=0;var s=this.pos[0],a=this.pos[1];"vertical"===this.dir?a+=e*this.size[1]:s+=e*this.size[0],t.drawImage(g.get(this.url),s,a,this.sizeImg[0],this.sizeImg[1],0,0,this.size[0],this.size[1])}}]),t}(),_=function(){function t(e){var i=e.size,n=void 0===i?[350,350]:i,s=e.sizeImg,a=void 0===s?[2048,2048]:s,o=e.position,r=void 0===o?[document.body.clientWidth-360,document.body.clientHeight-360]:o;Object(c["a"])(this,t),this.state="default",this.defaultState="default",this.variables={default:[1],angry:[1,2,3],claps:[1,2],happy:[1,2],repeat:[1,2],repeatFinish:[1]},this.playCount=1,this.fullPlayCount=0,this.timeAnimationPlay=30,this.interval=null,this.timer=0,this.size=n,this.position=r,this.sizeImg=a}return Object(p["a"])(t,[{key:"updateState",value:function(t){this.state=t,this.clearAnimate()}},{key:"updateDefaultState",value:function(t){this.defaultState=t,this.clearAnimate()}},{key:"clearAnimate",value:function(){clearInterval(this.interval),this.playCount=1,this.interval=null,this.timer=0}},{key:"animate",value:function(t){var e=this;this.interval||(this.interval=setInterval((function(){e.timer+=1}),1));var i=this.state,n=this.variables,s=this.playCount;t.drawImage(g.get("/evil_goblin//img/gnom/goblin_".concat(i,"_").concat(this.playCount,".png")),0,0,this.sizeImg[0],this.sizeImg[1],this.position[0],this.position[1],this.size[0],this.size[1]),this.fullPlayCount===n[i].length+3&&(this.updateState(this.defaultState),this.fullPlayCount=0),this.timeAnimationPlay<=this.timer&&(this.playCount+=1,n[i].length-1<s&&(this.playCount=1,this.fullPlayCount+=1),clearInterval(this.interval),this.interval=null,this.timer=0)}}]),t}(),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__scope"},[i("span",[t._v("Ваш счет: "+t._s(t.$store.state.scope))])])},C=[],k={name:"AppScope"},x=k,S=(i("67bc"),i("2877")),w=Object(S["a"])(x,y,C,!1,null,"41b99dd6",null),j=w.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"button-group"},[t._t("default")],2)},A=[],O={name:"AppButtonGroup"},F=O,G=(i("9e62"),Object(S["a"])(F,I,A,!1,null,"1ced1ef0",null)),z=G.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"button-group__button",attrs:{disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[t._t("default")],2)},B=[],E={name:"AppButton",props:{disabled:{type:Boolean}}},L=E,R=(i("071e"),Object(S["a"])(L,T,B,!1,null,"28f0422c",null)),P=R.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__timer"},[i("img",{attrs:{src:"/evil_goblin/img/cabinet/clock.png",width:"50px",height:"50px",alt:""}}),i("span",[t._v(" "+t._s(t.timeEnd))])])},D=[],U=(i("c5f6"),{name:"AppTimer",props:{timeEnd:{type:Number,require:!0}}}),M=U,W=(i("5bc6"),Object(S["a"])(M,$,D,!1,null,"e50c11ca",null)),q=W.exports,N={name:"LevelOne",components:{AppTimer:q,AppButton:P,AppButtonGroup:z,AppScope:j},props:{levelFinish:{type:Boolean,require:!0}},data:function(){var t=u.map((function(t){return new v(t)}));return{frameId:null,canvas:null,context:null,gameData:t,lastTime:null,gameTime:0,image:[],timeEnd:60,speed:300,goblin:null,votingByThisRound:!1,ramka:null}},methods:{init:function(){this.goblin=new _({});var t=this.$refs;this.canvas=t.game;var e=this.canvas;e.getContext&&(e.width=document.body.clientWidth,e.height=document.body.clientHeight,this.context=e.getContext("2d")),this.setBackground(),this.setRamka(),this.setGoblin(),this.updateGame(),this.addElement(!0),this.updateTimer()},checkStillLife:function(t){var e=this.image[0];this.votingByThisRound||(e.gameObject.isStillLife===t?(this.$store.commit("addScope"),this.goblin.updateState("angry")):this.goblin.updateState("happy"),this.speed*=3),this.votingByThisRound=!0},setBackground:function(){var t=this.context;t.drawImage(g.get("/evil_goblin//img/bg/bg-1.jpg"),0,0)},setRamka:function(){var t=[390,540],e=[1360,860];this.ramka=new b({url:"/evil_goblin//img/puzzle/frame-puzzle.png",pos:[0,0],size:t,sizeImg:e,positionInCanvas:this.setCenter(t),speed:6,frames:[0],dir:"vertical"})},setGoblin:function(){this.goblin.animate(this.context)},updateRamka:function(t){this.ramka.update(t,this.speed)},updateTimer:function(){var t=this;setInterval((function(){t.timeEnd-=1}),1e3)},updateGame:function(){if(!this.levelFinish){var t=Date.now(),e=(t-this.lastTime)/1e3;this.update(e),this.render(),this.renderRamka(this.image[0]),this.lastTime=t,this.frameId=window.requestAnimationFrame(this.updateGame)}},update:function(t){var e=this.context,i=this.canvas;this.gameTime+=t,e.clearRect(0,0,i.width,i.height),this.setBackground(),this.setGoblin(),this.updateRamka(t),this.updateEntities(t),this.isFinish()},isFinish:function(){this.timeEnd<=0&&this.$emit("levelFinish",1)},updateEntities:function(t){for(var e=0;e<this.image.length;e++)this.image[e].sprite.update(t,this.speed),this.image[e].sprite.posInCanvas[1]>document.body.clientHeight&&(this.image.splice(e,1),this.addElement(),e--)},addElement:function(t){var e=this.randomIntFromInterval(0,this.gameData.length-1),i=this.gameData[e];if(i){this.votingByThisRound||t||this.goblin.updateState("happy"),this.votingByThisRound=!1;var n=[352,480];this.image.push({gameObject:i,sprite:new b({url:i.img,pos:[0,0],size:n,positionInCanvas:this.setCenter(n),speed:6,frames:[0],dir:"horizontal"})})}this.speed=200},randomIntFromInterval:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},setRandomPosition:function(){return[Math.random()*(this.canvas.width-350),-480]},setCenter:function(t){return[document.body.clientWidth/2-t[0]/2,-t[1]-20]},render:function(){this.renderEntities(this.image)},renderEntities:function(t){for(var e=0;e<t.length;e++)this.renderEntity(t[e])},renderRamka:function(t){if(t){var e=this.context;e.save(),e.translate(t.sprite.posInCanvas[0]-25,t.sprite.posInCanvas[1]-30),this.ramka.render(e),e.restore()}},renderEntity:function(t){var e=this.context;e.save(),e.translate(t.sprite.posInCanvas[0],t.sprite.posInCanvas[1]),t.sprite.render(e),e.restore()}},mounted:function(){g.onReady(this.init)},beforeDestroy:function(){cancelAnimationFrame(this.frameId)}},H=N,J=(i("f1dc"),Object(S["a"])(H,f,d,!1,null,"56aa2e74",null)),K=J.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-scene",class:{"game-scene__win":t.isUserWin,"game-scene__lose":!t.isUserWin}},[i("AppPopUp",{attrs:{text:t.textResult,"img-url":t.isUserWin?"/evil_goblin//img/frames/frame-success.png":"/evil_goblin//img/frames/frame-fail.png"}}),i("AppScope"),i("AppButtonGroup",[i("AppButton",{staticClass:"button-group__button_green",on:{click:function(e){return t.nextLevel()}}},[t._v("Далее")])],1),i("canvas",{ref:"goblin",staticClass:"goblin"},[t._v("\n    Обновите браузер, к сожалению Ваша версия браузера не поддреживается 😿\n  ")])],1)},V=[],X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"result-popup"},[i("p",{staticClass:"popup-text"},[t._v("\n    "+t._s(t.text)+"\n  ")]),i("img",{staticClass:"result-popup__img",attrs:{src:t.imgUrl,alt:""}})])},Y=[],Z={name:"AppPopUp",props:{text:{type:String,require:!0},imgUrl:{type:String,require:!0}}},tt=Z,et=(i("db6e"),Object(S["a"])(tt,X,Y,!1,null,"9bfc4f56",null)),it=et.exports,nt={name:"LevelFinish",components:{AppButton:P,AppButtonGroup:z,AppPopUp:it,AppScope:j},props:{levelFinish:{type:Boolean,require:!0}},data:function(){return{frameId:null,canvas:null,context:null,lastTime:null,gameTime:0,speed:300,goblin:new _({position:[-10,-10]})}},computed:{isUserWin:function(){return this.$store.state.scope>0},textResult:function(){return this.isUserWin?"Ты справилась с заданием гоблина, и ему ничего не остается, как пропустить тебя к следующим испытаниям. «Но не радуйся слишком рано, - злобно шипит Гоблин тебя в след, - мы с тобой ещё встретимся, и тогда посмотрим, кто кого!":"Увы, ты не справился с заданием гоблина. Но внезапно в его холодное, злобное сердце закралась доброта: Гоблин соглашается пропустить тебя. «Но смотри, - ворчит он, - не разочаруй меня: со следующими заданиями ты должен совладать гораздо лучше."}},watch:{canvas:function(){this.goblin.updateDefaultState("repeatFinish")}},methods:{init:function(){var t=this.$refs;this.canvas=t.goblin;var e=this.canvas;e.getContext&&(e.width=350,e.height=350,this.context=e.getContext("2d")),this.setGoblin(),this.updateGame()},nextLevel:function(){this.$emit("startGame")},setGoblin:function(){this.goblin.animate(this.context)},updateGame:function(){if(!this.levelFinish){var t=Date.now(),e=(t-this.lastTime)/1e3;this.update(e),this.lastTime=t,this.frameId=window.requestAnimationFrame(this.updateGame)}},update:function(t){var e=this.context,i=this.canvas;this.gameTime+=t,e.clearRect(0,0,i.width,i.height),this.setGoblin()}},mounted:function(){g.onReady(this.init)},beforeDestroy:function(){cancelAnimationFrame(this.frameId)}},st=nt,at=(i("7822"),Object(S["a"])(st,Q,V,!1,null,"63b50949",null)),ot=at.exports,rt={name:"GameGround",components:{AppButton:P,AppButtonGroup:z,AppPopUp:it,LevelFinish:ot,LevelOne:K},data:function(){return{levelFirstFinish:!1,finishDemo:!1}},methods:{endGame:function(){this.finishDemo=!0},startNewGame:function(){this.levelFirstFinish=!1,this.$store.commit("clearScope")}},mounted:function(){var t=u.map((function(t){return t.img}));g.load(["/evil_goblin//img/bg/bg-1.jpg","/evil_goblin//img/puzzle/frame-puzzle.png","/evil_goblin//img/gnom/goblin_angry_1.png","/evil_goblin//img/gnom/goblin_angry_2.png","/evil_goblin//img/gnom/goblin_angry_3.png","/evil_goblin//img/gnom/goblin_claps_1.png","/evil_goblin//img/gnom/goblin_claps_2.png","/evil_goblin//img/gnom/goblin_happy_1.png","/evil_goblin//img/gnom/goblin_happy_2.png","/evil_goblin//img/gnom/goblin_repeat_1.png","/evil_goblin//img/gnom/goblin_repeat_2.png","/evil_goblin//img/gnom/goblin_default_1.png","/evil_goblin//img/gnom/goblin_repeatFinish_1.png"].concat(Object(l["a"])(t)))}},lt=rt,ut=(i("dbe9"),Object(S["a"])(lt,o,r,!1,null,"0372d374",null)),ct=ut.exports,pt={name:"app",components:{GameGround:ct}},ht=pt,mt=(i("5c0b"),Object(S["a"])(ht,s,a,!1,null,null,null)),gt=mt.exports,ft=i("2f62");n["a"].use(ft["a"]);var dt=new ft["a"].Store({state:{scope:0},mutations:{addScope:function(t){var e=10,i=setInterval((function(){e<=0?clearInterval(i):(t.scope+=1,e-=1)}),30)},clearScope:function(t){t.scope=0}},actions:{}});n["a"].config.productionTip=!1,new n["a"]({store:dt,render:function(t){return t(gt)}}).$mount("#app")},"5bc6":function(t,e,i){"use strict";var n=i("c1f3"),s=i.n(n);s.a},"5c0b":function(t,e,i){"use strict";var n=i("e332"),s=i.n(n);s.a},"67bc":function(t,e,i){"use strict";var n=i("ab5f"),s=i.n(n);s.a},7822:function(t,e,i){"use strict";var n=i("d65d"),s=i.n(n);s.a},"957f":function(t,e,i){},"9e62":function(t,e,i){"use strict";var n=i("a8c8"),s=i.n(n);s.a},a8c8:function(t,e,i){},ab5f:function(t,e,i){},afec:function(t,e,i){},b679:function(t){t.exports=JSON.parse('[{"isStillLife":false,"img":"/evil_goblin//img/task1/image1-1.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image1-2.jpg"},{"isStillLife":true,"img":"/evil_goblin//img/task1/image1-3.jpg"},{"isStillLife":true,"img":"/evil_goblin//img/task1/image2-1.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image2-2.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image2-3.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image1-4.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image1-5.jpg"},{"isStillLife":false,"img":"/evil_goblin//img/task1/image1-6.jpg"}]')},b90b:function(t,e,i){},c1f3:function(t,e,i){},d65d:function(t,e,i){},db6e:function(t,e,i){"use strict";var n=i("afec"),s=i.n(n);s.a},dbe9:function(t,e,i){"use strict";var n=i("b90b"),s=i.n(n);s.a},e332:function(t,e,i){},f1dc:function(t,e,i){"use strict";var n=i("957f"),s=i.n(n);s.a},f3f8:function(t,e,i){}});
//# sourceMappingURL=app.18a8bf2a.js.map